function ajax_elements(e,t){var n={action:"stencil_elements",args:e};jQuery.post(ajaxurl,n,function(e){t(e)})}function ajax_element(e,t,n){var l={action:"stencil_element",elementType:e,args:t,token:stencilToken};if(void 0!==stencilDev&&null!==stencilDev){var o=stencilUrl+"ve/el-"+e+".html";jQuery.get(o,l,function(e){n(e)})}else jQuery.post(stencilUrl,l,function(e){n(e)})}function ajax_element_edit(e,t,n){var l={action:"stencil_element_edit",elementType:e,args:t,token:stencilToken};if(void 0!==stencilDev&&null!==stencilDev){var o=stencilUrl+"ve/options.html";jQuery.get(o,l,function(e){n(e)})}else jQuery.post(stencilUrl,l,function(e){n(e)})}function sortableElement(e,t){0<e.children(".ve-elements").length&&Sortable.create(e.children(".ve-elements")[0],{group:"stle",sort:!0,delay:0,animation:150,draggable:".ve-element",onAdd:function(e){addElement($(e.item))}})}function nestedElement(e){var t=$("#"+e);if(0<$("#"+e).children(".ve-elements").length){t=$("#"+e).children(".ve-elements").first();Sortable.create(t[0],{group:"stle",sort:!0,delay:0,animation:150,draggable:".ve-element",onAdd:function(e){addElement($(e.item))}})}toolElement(t)}function addElement(t){if(void 0!==t.data("type")){t.append("loading");var e=t.data("type"),n=createId();ajax_element(e,{elementType:e,elementId:n},function(e){t.after(e),t.next().attr("id",n),t.remove(),nestedElement(n)})}}function toolElement(t,n){t.mouseover(function(e){e.stopPropagation(),n||t.prepend('<div class="ve-tool" ><div class="menu"><button class="btn btn-edit">edit</button><button class="btn btn-delete">delete</button></div></div>')}).mouseout(function(e){e.stopPropagation(),t.children(".ve-tool").remove()})}function stencilActions(e){e.on("click",".add-column",function(e){var t=$(this).closest(".ve-element"),n="column",l=createId();ajax_element(n,{elementType:n,elementId:l},function(e){t.children(".ve-elements").append(e),t.children(".ve-elements").children(".ve-element").last().attr("id",l),nestedElement(l)})}),e.on("click",".btn-edit",function(e){$(this).closest(".ve-element");ajax_element_edit("test",{},function(e){$("body").append(e);var t=jQuery("#stencilOptionModal");t.modal(),t.on("click",".save",function(e){e.preventDefault()}),t.on("hidden.bs.modal",function(e){})})}),e.on("click",".btn-delete",function(e){$(this).closest(".ve-element").remove()})}function createId(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}jQuery(function(l){l(".ve-options").each(function(e,t){var n=l(this);Sortable.create(n[0],{group:{name:"stle",pull:"clone",put:!1},sort:!1,delay:0,animation:150,draggable:".ve-option"})});var e=l("#ve-editor");sortableElement(e,!0),stencilActions(e),l(".ve-element").each(function(e,t){var n=l(this);toolElement(n),sortableElement(n)})});